{% extends "base.html" %}

{% block content %}
<h2>Книги по автору</h2>

<form method="get">
    <label for="author">Автор:</label>
    <select name="author_id" id="author">
        <option value="">-- выбрать автора --</option>
        {% for a in authors %}
        <option value="{{ a.id }}" {% if author and a.id == author.id %}selected{% endif %}>
            {{ a.name }}
        </option>
        {% endfor %}
    </select>
    <button type="submit">Показать</button>
</form>

{% if author %}
<h3>Книги автора: {{ author.name }}</h3>
{% endif %}

<ul>
    {% for book in books %}
    <li>"{{ book.title }}" ({{ book.publication_date }})</li>
    {% empty %}
    <li>Книг не найдено.</li>
    {% endfor %}
</ul>
{% endblock %}
